import { extensions, ExtensionType } from '@pixi/core';
import { testVideoFormat } from '../utils/testVideoFormat';

import type { FormatDetectionParser } from '..';

export const detectOgv = {
    extension: {
        type: ExtensionType.DetectionParser,
        priority: 0,
    },
    test: async (): Promise<boolean> =>
    {
        // eslint-disable-next-line max-len
        const oggData = 'data:video/ogg;base64,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';

        return testVideoFormat(oggData);
    },
    add: async (formats) => [...formats, 'ogv'],
    remove: async (formats) => formats.filter((f) => f !== 'ogv'),
} as FormatDetectionParser;

extensions.add(detectOgv);
